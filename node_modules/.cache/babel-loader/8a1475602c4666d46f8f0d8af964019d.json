{"remainingRequest":"/myproject/git/code/web-admin-yxbaobei/node_modules/babel-loader/lib/index.js!/myproject/git/code/web-admin-yxbaobei/node_modules/eslint-loader/index.js??ref--13-0!/myproject/git/code/web-admin-yxbaobei/src/utils/permission.js","dependencies":[{"path":"/myproject/git/code/web-admin-yxbaobei/src/utils/permission.js","mtime":1576046458935},{"path":"/myproject/git/code/web-admin-yxbaobei/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/myproject/git/code/web-admin-yxbaobei/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/myproject/git/code/web-admin-yxbaobei/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"/myproject/git/code/web-admin-yxbaobei/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = checkPermission;\nexports.getRoutesTree = getRoutesTree;\n\nrequire(\"core-js/modules/es6.function.name\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"/myproject/git/code/web-admin-yxbaobei/node_modules/@babel/runtime-corejs2/helpers/objectSpread2\"));\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es7.array.includes\");\n\nrequire(\"core-js/modules/es6.string.includes\");\n\nvar _store = _interopRequireDefault(require(\"@/store\"));\n\n/**\n * @param {Array} value\n * @returns {Boolean}\n * @example see @/views/permission/directive.vue\n */\nfunction checkPermission(value) {\n  if (value && value instanceof Array && value.length > 0) {\n    var roles = _store.default.getters && _store.default.getters.roles;\n    var permissionRoles = value;\n    var hasPermission = roles.some(function (role) {\n      return permissionRoles.includes(role);\n    });\n\n    if (!hasPermission) {\n      return false;\n    }\n\n    return true;\n  } else {\n    console.error(\"need roles! Like v-permission=\\\"['admin','editor']\\\"\");\n    return false;\n  }\n}\n/**\n * 获取权限树id/lebel列表\n * @param roles\n * @returns {Array}\n */\n\n\nfunction getRoutesTree(roles) {\n  var tree = [];\n  var routes = !roles || typeof roles === 'undefined' ? _store.default.getters && _store.default.getters.permission_routes : roles;\n  routes.forEach(function (route) {\n    var tmp = (0, _objectSpread2.default)({}, route);\n\n    if (tmp.id && tmp.name) {\n      var tmpTree = {\n        id: tmp.id,\n        label: tmp.meta.title ? tmp.meta.title : tmp.name,\n        children: []\n      };\n\n      if (tmp.children && tmp.children.length) {\n        tmpTree['children'] = getRoutesTree(tmp.children);\n      }\n\n      tree.push(tmpTree);\n    }\n  });\n  return tree;\n}",null]}